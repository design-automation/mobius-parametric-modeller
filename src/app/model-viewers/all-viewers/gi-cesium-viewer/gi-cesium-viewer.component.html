<div id="cesium-viewer-container">
    <!-- Cesium Viewer -->
    <cesium-viewer [model]='data' (eventClicked)="childEventClicked($event)"></cesium-viewer>
    <!-- Settings Button & Settings Panel -->
    <button class='btn' id="cesium_settings_button" mat-icon-button (click)="openModal('cesium_settings_modal')" title="Settings"><mat-icon svgIcon="settings"></mat-icon></button>
    <button class='btn' id="cesium_zoom_fit" mat-icon-button (click)="zoomfit()" title='Zoom to Fit Model'><mat-icon svgIcon="cZoom"></mat-icon></button>

    <cesium-modal-window id="cesium_settings_modal" (closeModal) = 'onCloseModal()'>
        <h1>Cesium Viewer Settings</h1>
        <tabs id="settingsTab">
            <tab tabTitle="Scene">
                <div class="mat-elevation-z1">
                    <dl>
                        <dd>
                            <div class="label">Imagery tile:</div>
                            <select [(ngModel)]='settings.imagery.layer'>
                                <option *ngFor="let item of layerList" value ={{item}}>{{item}}</option>
                            </select>
                        </dd>
                        <ng-container *ngIf='checkAPIKeyInput()'>
                            <dd>
                                <div class="label">Imagery API key:</div>
                            </dd>
                            <dd>
                                <textarea class="tArea"  [(ngModel)]='settings.imagery.apiKey[_keyMapping[settings.imagery.layer]]'></textarea>
                            </dd>
                        </ng-container>
                        <dd>
                            <div class="label">Terrain:</div>
                            <select [(ngModel)]='settings.imagery.terrain'>
                                <option *ngFor="let item of terrainList" value ={{item}}>{{item}}</option>
                            </select>
                        </dd>
                        <dd>
                            <hr>
                        </dd>
                        <dd id='cesium_date'>
                            <div class="label">Date:</div><br><br>
                            <input class='date-picker' type="datetime-local" [(ngModel)]='settings.time.date'>
                            <button (click)="settingOnChange('time.date')" class="filebtn getbtn">Get</button>
                            <button (click)="settingOnChange('time.current')" class="filebtn getbtn">Reset</button>
                        </dd>
                        <dd>
                            <hr>
                        </dd>
                        <dd id='cesium_Model'>
                            <div class="label">Polygon Edge:</div>
                            <div class="onoffswitch">
                                <input type="checkbox"
                                name="onoffswitch"
                                class="onoffswitch-checkbox"
                                id="polygonEdgeDis"
                                [(ngModel)]='settings.model.polygonEdge'
                                >
                                <label class="onoffswitch-label" for="polygonEdgeDis">
                                    <span class="onoffswitch-inner"></span>
                                    <span class="onoffswitch-switch"></span>
                                </label>
                            </div>
                        </dd>
                        <dd>
                            <hr>
                        </dd>
                        <dd id='cesium_camera'>
                            <div>Camera Position:</div>
                            <div class='coord'> x: <input disabled [value]='settings.camera.pos.x'></div>
                            <div class='coord'> y: <input disabled [value]='settings.camera.pos.y'></div>
                            <div class='coord'> z: <input disabled [value]='settings.camera.pos.z'></div>
                            <br>
                            <div>Camera direction:</div>
                            <div class='coord'> x: <input disabled [value]='settings.camera.direction.x'></div>
                            <div class='coord'> y: <input disabled [value]='settings.camera.direction.y'></div>
                            <div class='coord'> z: <input disabled [value]='settings.camera.direction.z'></div>
                            <br>
                            <div>Camera up:</div>
                            <div class='coord'> x: <input disabled [value]='settings.camera.up.x'></div>
                            <div class='coord'> y: <input disabled [value]='settings.camera.up.y'></div>
                            <div class='coord'> z: <input disabled [value]='settings.camera.up.z'></div>
                            <br>
                            <div>Camera right:</div>
                            <div class='coord'> x: <input disabled [value]='settings.camera.right.x'></div>
                            <div class='coord'> y: <input disabled [value]='settings.camera.right.y'></div>
                            <div class='coord'> z: <input disabled [value]='settings.camera.right.z'></div>
                            <br>
                            <button (click)="settingOnChange('camera.pos')" class="filebtn getbtn">Get</button>
                        </dd>
            </dl>
                </div>
            </tab>
            <tab tabTitle="Cesium Ion">
                <div class="mat-elevation-z1">
                    <dl>
                        <dd>
                            <div class="label">Cesium Ion Access:</div>
                        </dd>
                        <dd>
                            <textarea class="tArea" [(ngModel)]='settings.cesium.ion'></textarea>
                        </dd>
                        <dd>
                            <div class="label">Cesium Ion Asset IDs:</div>
                        </dd>
                        <dd>
                            <textarea class="tArea" [(ngModel)]='settings.cesium.assetid'></textarea>
                        </dd>
                        <dd>
                            <div class="label">Save Ion Access to local storage:</div>
                            <div class="onoffswitch">
                                <input type="checkbox"
                                name="onoffswitch"
                                class="onoffswitch-checkbox"
                                id="saveIonAccess"
                                [(ngModel)]='settings.cesium.save'
                                >
                                <label class="onoffswitch-label" for="saveIonAccess">
                                    <span class="onoffswitch-inner"></span>
                                    <span class="onoffswitch-switch"></span>
                                </label>
                            </div>
                        </dd>
                    </dl>
                </div>
            </tab>
        </tabs>
        <button (click)="closeModal('cesium_settings_modal', true);" class="filebtn closebtn setting">Apply</button>
        <button (click)="closeModal('cesium_settings_modal');" class='filebtn closebtn setting'>Cancel</button>
        <!-- <button (click)="resetToDefault();" class='filebtn closebtn setting' style="float: right;">Default</button> -->
    </cesium-modal-window>


</div>
