{"name":"Minimise_Detours_Solver","author":"new_user","flowchart":{"id":"9594b783-e118-315f-4b6a-4b656ef08bab","name":"Minimise Detours","description":"","language":"js","meta":{"selected_nodes":[0]},"nodes":[{"name":"Start","id":"node_ufbmhrlbomk","position":{"x":5380,"y":5000},"enabled":true,"type":"start","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":10,"ID":"prod-47xr49lq5we","enabled":true,"print":false,"argCount":2,"meta":{"module":"Input","name":"Constant","inputMode":1,"description":"A seed used for generating tha random lines."},"args":[{"name":"const_name","value":"RAND_SEED","jsValue":"RAND_SEED_"},{"name":"__input__","value":0.5983,"step":"0.0001","min":"0","max":"1"}],"selectGeom":false},{"type":10,"ID":"prod-avd0vnz0w4","enabled":true,"print":false,"argCount":2,"meta":{"module":"Input","name":"Constant","inputMode":1,"description":"The maximum distance for positions to attract one another. Positions that are further apart than this distance will not influence one another."},"args":[{"name":"const_name","value":"DIST","jsValue":"DIST_"},{"name":"__input__","value":"15","step":"0.1","min":"1","max":"100"}],"selectGeom":false},{"type":10,"ID":"prod-9rvgxsarj8m","enabled":true,"print":false,"argCount":2,"meta":{"module":"Input","name":"Constant","inputMode":1,"description":"The dampening applied to the force vector for moving positions. A lower value means that positions move more slowly, but this might also mean that more iterations are required. "},"args":[{"name":"const_name","value":"DAMPENING","jsValue":"DAMPENING_"},{"name":"__input__","value":0.005,"step":"0.001","min":"0","max":"0.1"}]},{"type":10,"ID":"prod-sf2u7t7367","enabled":true,"print":false,"argCount":2,"meta":{"module":"Input","name":"Constant","inputMode":1,"description":"The number of iterations to run the solver for. "},"args":[{"name":"const_name","value":"NUM_ITERATIONS","jsValue":"NUM_ITERATIONS_"},{"name":"__input__","value":"30","step":"1","min":"1","max":"100"}],"selectGeom":false}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":false,"show_func":false},"input":{"name":"input","type":0,"edges":[],"meta":{"mode":0,"opts":{}},"parentNode":"~flowchart~nodes~0"},"output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output","target":{"name":"input","type":0,"edges":["~flowchart~nodes~0~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"Generate Lines","id":"node_xzrq3f2xj8d","position":{"x":5380,"y":5120},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":4,"ID":"prod-5sgr0646u9c","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"i","jsValue":"i_"},{"name":"list","value":"range(20)","usedVars":[],"jsValue":"range(__debug__, 20)"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~procedure~1","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~procedure~1","ID":"prod-njkm3v6uhka","enabled":true,"print":false,"meta":{"module":"make","name":"Position"},"argCount":3,"args":[{"name":"var_name","value":"posi1","jsValue":"posi1_"},{"name":"__model__"},{"name":"coords","value":"[rand(-100, 100, RAND_SEED * i + 0.1), -100, 0]","usedVars":["RAND_SEED","i"],"jsValue":"[rand(__debug__, -100, 100, RAND_SEED_ * i_ + 0.1), -100, 0]"}],"variable":"posi1"},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~procedure~1","ID":"prod-ptryixxama","enabled":true,"print":false,"meta":{"module":"make","name":"Position"},"argCount":3,"args":[{"name":"var_name","value":"posi2","jsValue":"posi2_"},{"name":"__model__"},{"name":"coords","value":"[rand(-100, 100, RAND_SEED * i + 0.11), 100, 0]","usedVars":["RAND_SEED","i"],"jsValue":"[rand(__debug__, -100, 100, RAND_SEED_ * i_ + 0.11), 100, 0]"}],"variable":"posi2"},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~procedure~1","ID":"prod-xgqisn8stf","enabled":true,"print":false,"meta":{"module":"make","name":"Polyline"},"argCount":4,"args":[{"name":"var_name","value":"ln","jsValue":"ln_"},{"name":"__model__"},{"name":"entities","value":"[posi1, posi2]","usedVars":["posi1","posi2"],"jsValue":"[posi1_, posi2_]"},{"name":"close","value":"'open'","jsValue":"'open'","usedVars":[]}],"variable":"ln"},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~procedure~1","ID":"prod-vg32ol6ev99","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"[posi1, posi2]@fixed","jsValue":"[posi1_, posi2_]@fixed","usedVars":["posi1","posi2"]},{"name":"value","value":"true","usedVars":[],"jsValue":"true"}],"variable":null}],"variable":"i"},{"type":8,"ID":"prod-yodu825yzk","enabled":true,"print":false,"meta":{"module":"edit","name":"Divide"},"argCount":5,"args":[{"name":"var_name","value":"div","jsValue":"div_"},{"name":"__model__"},{"name":"entities","value":"#pl","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pl', null)"},{"name":"divisor","value":"5","usedVars":[],"jsValue":"5"},{"name":"method","value":"'by_max_length'","usedVars":[],"jsValue":"'by_max_length'"}],"variable":"div"}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"hasError":false,"hasExecuted":true,"input":"~flowchart~nodes~0~output~edges~0~target","output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output","target":{"name":"input","type":0,"edges":["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"Run Solver","id":"node_kr6zxvhx1yc","position":{"x":5380,"y":5260},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":14,"ID":"prod-26r773wwull","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Get posis xyz"}],"selectGeom":false},{"type":0,"ID":"prod-d6i5hmot4ff","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"posis","jsValue":"posis_"},{"name":"value","value":"#ps","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'ps', null)"}],"variable":"posis","selectGeom":false},{"type":0,"ID":"prod-3zjwiho30ov","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"fixed","jsValue":"fixed_"},{"name":"value","value":"[]","usedVars":[],"jsValue":"[]"}],"variable":"fixed","selectGeom":false},{"type":0,"ID":"prod-a6lxx06od0b","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"xyzs","jsValue":"xyzs_"},{"name":"value","value":"[]","usedVars":[],"jsValue":"[]"}],"variable":"xyzs","selectGeom":false},{"type":4,"ID":"prod-2z6v9zrlb0h","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"index","jsValue":"index_"},{"name":"list","value":"range(len(posis))","usedVars":["posis"],"jsValue":"range(__debug__, len(__debug__, posis_))"}],"children":[{"type":13,"ID":"prod-1il7nir8p0v","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~5","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":1,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~5","ID":"prod-f2906mkdt3e","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"posis[index]@fixed","usedVars":["posis","index"],"jsValue":"__modules__.attrib.Get(__params__.model, posis_[pythonList(index_, posis_.length)], 'fixed')"}],"children":[{"type":13,"ID":"prod-ilw6imtoa2","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~5~children~1","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~5~children~1","ID":"prod-4qcjc8d62uj","enabled":true,"print":false,"meta":{"module":"list","name":"Add"},"argCount":4,"args":[{"name":"__none__"},{"name":"list","value":"fixed","usedVars":["fixed"],"jsValue":"fixed_"},{"name":"item","value":"index","usedVars":["index"],"jsValue":"index_"},{"name":"method","value":"'to_end'","jsValue":"'to_end'","usedVars":[]}],"selectGeom":false}],"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~5","ID":"prod-er5loae3n2n","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"xyzs[index]","jsValue":"xyzs_[pythonList(index_, xyzs_.length)]","usedVars":["xyzs","index"]},{"name":"value","usedVars":["posis","index"],"value":"posis[index]@xyz","jsValue":"__modules__.attrib.Get(__params__.model, posis_[pythonList(index_, posis_.length)], 'xyz')"}],"variable":null,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~5","ID":"prod-0crucwrnet0m","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"posis[index]@i","jsValue":"posis_[pythonList(index_, posis_.length)]@i","usedVars":["posis","index"]},{"name":"value","value":"index","usedVars":["index"],"jsValue":"index_"}],"variable":null,"selectGeom":false}],"variable":"index","selectGeom":false},{"type":14,"ID":"prod-4862tszwnk3","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Create a data structure that maps the posi index to the pline index"}],"selectGeom":false},{"type":0,"ID":"prod-0aord6c5r35n","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"plines","jsValue":"plines_"},{"name":"value","value":"#pl","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pl', null)"}],"variable":"plines","selectGeom":false},{"type":0,"ID":"prod-op7pt87rzu","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"posi_to_pline_map","jsValue":"posi_to_pline_map_"},{"name":"value","value":"[]","usedVars":[],"jsValue":"[]"}],"variable":"posi_to_pline_map","selectGeom":false},{"type":4,"ID":"prod-jseiyrhmrm","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"pline_index","jsValue":"pline_index_"},{"name":"list","value":"range(len(plines))","usedVars":["plines"],"jsValue":"range(__debug__, len(__debug__, plines_))"}],"children":[{"type":13,"ID":"prod-f3rebm5gmvb","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":4,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9","ID":"prod-sndynwjm8u","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"posi","jsValue":"posi_"},{"name":"list","value":"plines[pline_index]#ps","usedVars":["plines","pline_index"],"jsValue":"__modules__.query.Get(__params__.model, 'ps', plines_[pythonList(pline_index_, plines_.length)])"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9~children~1","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9~children~1","ID":"prod-du04p6s4vqa","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"posi_index","jsValue":"posi_index_"},{"name":"value","value":"posi@i","usedVars":["posi"],"jsValue":"__modules__.attrib.Get(__params__.model, posi_, 'i')"}],"variable":"posi_index"},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9~children~1","ID":"prod-480oc11lbny","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"posi_to_pline_map[posi_index]","jsValue":"posi_to_pline_map_[pythonList(posi_index_, posi_to_pline_map_.length)]","usedVars":["posi_index","posi_to_pline_map"]},{"name":"value","value":"pline_index","usedVars":["pline_index"],"jsValue":"pline_index_"}],"variable":null}],"variable":"posi"}],"variable":"pline_index","selectGeom":false},{"type":14,"ID":"prod-pqx2xx1tld","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Run Solver"}],"selectGeom":false},{"type":4,"ID":"prod-ry9qxrjek5t","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"iter","jsValue":"iter_"},{"name":"list","value":"range(NUM_ITERATIONS)","usedVars":["NUM_ITERATIONS"],"jsValue":"range(__debug__, NUM_ITERATIONS_)"}],"children":[{"type":13,"ID":"prod-4004k4d6ix5","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"ID":"prod-e0hcpzcoktp","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"xyzs_tmp","jsValue":"xyzs_tmp_"},{"name":"value","value":"[]","usedVars":[],"jsValue":"[]"}],"variable":"xyzs_tmp","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11"},{"type":4,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11","ID":"prod-ggfutcsvvn9","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"index","jsValue":"index_"},{"name":"list","value":"range(len(posis))","usedVars":["posis"],"jsValue":"range(__debug__, len(__debug__, posis_))"}],"children":[{"type":13,"ID":"prod-ykxuh08r8eg","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":14,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2","ID":"prod-kva7hthremc","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"skip the posis that are fixed"}]},{"type":1,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2","ID":"prod-tqihmubeawn","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"listHas(fixed, index)","usedVars":["index","fixed"],"jsValue":"listHas(__debug__, fixed_, index_)"}],"children":[{"type":13,"ID":"prod-wrz8b2v48ai","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2~children~2","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2~children~2","ID":"prod-v2ven0ao8ss","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"xyzs_tmp[index]","jsValue":"xyzs_tmp_[pythonList(index_, xyzs_tmp_.length)]","usedVars":["xyzs_tmp","index"]},{"name":"value","value":"xyzs[index]","usedVars":["index","xyzs"],"jsValue":"xyzs_[pythonList(index_, xyzs_.length)]"}],"variable":null,"selectGeom":false},{"type":7,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2~children~2","ID":"prod-5a2q93usex","enabled":true,"print":false,"argCount":0,"args":[],"selectGeom":false}],"selectGeom":false},{"type":14,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2","ID":"prod-99vqgt8ubp","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"calculate the sum of all the vectors to neighbouring posis"}]},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2","ID":"prod-wc99ucucxe","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"vec_sum","jsValue":"vec_sum_"},{"name":"value","value":"[0, 0, 0]","usedVars":[],"jsValue":"[0, 0, 0]"}],"variable":"vec_sum","selectGeom":false},{"type":18,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2","ID":"prod-svthwzz9sr","enabled":true,"print":false,"argCount":4,"meta":{"module":"localFunc","name":"getNeighbours","otherInfo":{"deletedArgs":[{"name":"dist","value":"dist","jsValue":"dist_","usedVars":["dist"],"linked":false,"invalidVar":false}]}},"args":[{"name":"var_name","value":"posi_n","jsValue":"posi_n_"},{"name":"i","value":"index","usedVars":["index"],"jsValue":"index_"},{"name":"xyzs","value":"xyzs","usedVars":["xyzs"],"jsValue":"xyzs_"},{"name":"posi_to_pline_map","value":"posi_to_pline_map","usedVars":["posi_to_pline_map"],"jsValue":"posi_to_pline_map_"}],"variable":"posi_n"},{"type":4,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2","ID":"prod-gxb23w2y4s","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"index_n","jsValue":"index_n_"},{"name":"list","value":"posi_n","usedVars":["posi_n"],"jsValue":"posi_n_"}],"children":[{"type":13,"ID":"prod-1e5r63tno6h","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2~children~6","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2~children~6","ID":"prod-4ibu8n7hr48","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"force_vec","jsValue":"force_vec_"},{"name":"value","value":"vecFromTo(xyzs[index], xyzs[index_n])","usedVars":["index_n","index","xyzs"],"jsValue":"vecFromTo(__debug__, xyzs_[pythonList(index_, xyzs_.length)], xyzs_[pythonList(index_n_, xyzs_.length)])"}],"variable":"force_vec","selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2~children~6","ID":"prod-41y26ya5t16","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"force_magnitude","jsValue":"force_magnitude_"},{"name":"value","value":"(DIST - vecLen(force_vec)) * DAMPENING","usedVars":["DAMPENING","DIST","force_vec"],"jsValue":"(DIST_ - vecLen(__debug__, force_vec_)) * DAMPENING_"}],"variable":"force_magnitude","selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2~children~6","ID":"prod-g3m7f2fe1qw","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"force_vec","jsValue":"force_vec_"},{"name":"value","value":"vecMult(vecNorm(force_vec), force_magnitude)","usedVars":["force_vec","force_magnitude"],"jsValue":"vecMult(__debug__, vecNorm(__debug__, force_vec_), force_magnitude_)"}],"variable":"force_vec","selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2~children~6","ID":"prod-ddxxwp44wx6","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"vec_sum","jsValue":"vec_sum_"},{"name":"value","value":"vecAdd(vec_sum, force_vec)","usedVars":["force_vec","vec_sum"],"jsValue":"vecAdd(__debug__, vec_sum_, force_vec_)"}],"variable":"vec_sum","selectGeom":false}],"variable":"index_n","selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11~children~2","ID":"prod-g71eod7cj9t","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"xyzs_tmp[index]","jsValue":"xyzs_tmp_[pythonList(index_, xyzs_tmp_.length)]","usedVars":["xyzs_tmp","index"]},{"name":"value","value":"vecAdd(xyzs[index], vec_sum)","usedVars":["vec_sum","index","xyzs"],"jsValue":"vecAdd(__debug__, xyzs_[pythonList(index_, xyzs_.length)], vec_sum_)"}],"variable":null,"selectGeom":false}],"variable":"index","selectGeom":false},{"type":14,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11","ID":"prod-qjek0uvgqg","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"swap the data structures, the temp data now becomes the main data for the next iteration"}]},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~11","ID":"prod-inyawxbus2i","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"xyzs","jsValue":"xyzs_","usedVars":["posi_xyz_tmp","p"]},{"name":"value","value":"xyzs_tmp","usedVars":["xyzs_tmp"],"jsValue":"xyzs_tmp_"}],"variable":"xyzs","selectGeom":false}],"variable":"iter","selectGeom":false},{"type":14,"ID":"prod-qdq81ddgrpo","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Move the posis"}],"selectGeom":false},{"type":4,"ID":"prod-n91fuoz8z7","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"posi","jsValue":"posi_"},{"name":"list","value":"#ps","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'ps', null)"}],"children":[{"type":13,"ID":"prod-3cqs11k5z49","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~13","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~13","ID":"prod-56oefchbzad","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"posi@xyz","jsValue":"posi_@xyz","usedVars":["posi"]},{"name":"value","value":"xyzs[posi@i ]","usedVars":["xyzs","posi"],"jsValue":"xyzs_[pythonList( __modules__.attrib.Get(__params__.model, posi_, 'i'), xyzs_.length)]"}],"variable":null,"selectGeom":false}],"variable":"posi","selectGeom":false}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":16,"ID":"prod-7hhsewfvynl","enabled":true,"print":false,"argCount":4,"meta":{"module":"","name":"","otherInfo":{"prev_name":"getNeighbours","num_returns":1,"collapsed":false,"deletedArgs":[{"name":"arg_4","value":"dist","jsValue":"dist_","linked":false,"invalidVar":false,"usedVars":["dist"]}]}},"args":[{"name":"func_name","value":"getNeighbours","jsValue":"getNeighbours_"},{"name":"arg_1","value":"i","jsValue":"i_","usedVars":["i"]},{"name":"arg_2","value":"xyzs","jsValue":"xyzs_","usedVars":["xyzs"]},{"name":"arg_3","value":"posi_to_pline_map","jsValue":"posi_to_pline_map_","usedVars":["posi_to_pline_map"]}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1","ID":"prod-9jfajn5blja","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"result","jsValue":"result_"},{"name":"value","value":"[]","usedVars":[],"jsValue":"[]"}],"variable":"result"},{"type":4,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1","ID":"prod-xmmj2nvi9g","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"j","jsValue":"j_"},{"name":"list","value":"range(len(xyzs))","usedVars":["xyzs"],"jsValue":"range(__debug__, len(__debug__, xyzs_))"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":14,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2","ID":"prod-gwvsjnrjcau","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"if i and j posis are on the same pline, then we skip, continue onto the next one"}]},{"type":1,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2","ID":"prod-qpx1gyktizq","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"posi_to_pline_map[i] == posi_to_pline_map[j]","usedVars":["j","i","posi_to_pline_map"],"jsValue":"posi_to_pline_map_[pythonList(i_, posi_to_pline_map_.length)] == posi_to_pline_map_[pythonList(j_, posi_to_pline_map_.length)]"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2~children~2","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":7,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2~children~2","ID":"prod-a3i84w4r1ag","enabled":true,"print":false,"argCount":0,"args":[]}]},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2","ID":"prod-9ktmz46csaf","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"x","jsValue":"x_"},{"name":"value","value":"abs(xyzs[i][0] - xyzs[j][0])","usedVars":["j","i","xyzs"],"jsValue":"abs(__debug__, xyzs_[pythonList(i_, xyzs_.length)][pythonList(0, xyzs_[pythonList(i_, xyzs_.length)].length)] - xyzs_[pythonList(j_, xyzs_.length)][pythonList(0, xyzs_[pythonList(j_, xyzs_.length)].length)])"}],"variable":"x"},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2","ID":"prod-ygnlrk3gfoh","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"y","jsValue":"y_"},{"name":"value","value":"abs(xyzs[i][1] - xyzs[j][1])","usedVars":["j","i","xyzs"],"jsValue":"abs(__debug__, xyzs_[pythonList(i_, xyzs_.length)][pythonList(1, xyzs_[pythonList(i_, xyzs_.length)].length)] - xyzs_[pythonList(j_, xyzs_.length)][pythonList(1, xyzs_[pythonList(j_, xyzs_.length)].length)])"}],"variable":"y"},{"type":1,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2","ID":"prod-1lixxg2m3hz","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"x < DIST && y < DIST","usedVars":["DIST","x","y"],"jsValue":"x_ < DIST_ && y_ < DIST_"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2~children~5","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2~children~5","ID":"prod-sclv00w8qp","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"this_dist","jsValue":"this_dist_"},{"name":"value","value":"sqrt(x * x + y * y)","usedVars":["x","y"],"jsValue":"sqrt(__debug__, x_ * x_ + y_ * y_)"}],"variable":"this_dist"},{"type":1,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2~children~5","ID":"prod-qfsdv6fh5n","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"this_dist < DIST","usedVars":["DIST","this_dist"],"jsValue":"this_dist_ < DIST_"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2~children~5~children~2","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~2~children~5~children~2","ID":"prod-19dltt8c8it","enabled":true,"print":false,"meta":{"module":"list","name":"Add"},"argCount":4,"args":[{"name":"__none__"},{"name":"list","value":"result","usedVars":["result"],"jsValue":"result_"},{"name":"item","value":"j","usedVars":["j"],"jsValue":"j_"},{"name":"method","value":"'to_start'","jsValue":"'to_start'","usedVars":[]}]}]}]}],"variable":"j"},{"type":17,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1","ID":"prod-2k64velxros","enabled":true,"print":false,"argCount":1,"args":[{"name":"Value","value":"result","usedVars":["result"],"jsValue":"result_"}]}],"variable":null}],"state":{"procedure":[],"show_code":true,"show_func":true},"input":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target","output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output","target":{"name":"input","type":0,"edges":["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"Generate Spaces","id":"node_kuw5zte5uzb","position":{"x":5200,"y":5380},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"ID":"prod-pfm728otfxp","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"plines","jsValue":"plines_"},{"name":"value","value":"#pl","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pl', null)"}],"variable":"plines"},{"type":14,"ID":"prod-qu1ozqc119","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"offset the paths"}]},{"type":8,"ID":"prod-9zn77781q07","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"paths","jsValue":"paths_"},{"name":"__model__"},{"name":"entities","value":"plines","usedVars":["plines"],"jsValue":"plines_"},{"name":"dist","value":"1.5","usedVars":[],"jsValue":"1.5"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"paths"},{"type":14,"ID":"prod-ecz57e13q2b","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"create rectangular base and subtract the paths"}]},{"type":8,"ID":"prod-mxps2mzhpv","enabled":true,"print":false,"meta":{"module":"pattern","name":"Rectangle"},"argCount":4,"args":[{"name":"var_name","value":"g","jsValue":"g_"},{"name":"__model__"},{"name":"origin","value":"XY","usedVars":[],"jsValue":"JSON.parse(JSON.stringify(XY))"},{"name":"size","value":"160","usedVars":[],"jsValue":"160"}],"variable":"g"},{"type":8,"ID":"prod-vd0ve38k6ai","enabled":true,"print":false,"meta":{"module":"make","name":"Polygon"},"argCount":3,"args":[{"name":"var_name","value":"base","jsValue":"base_"},{"name":"__model__"},{"name":"entities","value":"g","usedVars":["g"],"jsValue":"g_"}],"variable":"base"},{"type":8,"ID":"prod-9aniqlnmauk","enabled":true,"print":false,"meta":{"module":"poly2d","name":"Boolean"},"argCount":5,"args":[{"name":"var_name","value":"result","jsValue":"result_"},{"name":"__model__"},{"name":"a_entities","value":"base","usedVars":["base"],"jsValue":"base_"},{"name":"b_entities","value":"paths","usedVars":["paths"],"jsValue":"paths_"},{"name":"method","value":"'difference'","jsValue":"'difference'","usedVars":[]}],"variable":"result"},{"type":8,"ID":"prod-hqxyy6w1il","enabled":true,"print":false,"meta":{"module":"poly2d","name":"Clean"},"argCount":4,"args":[{"name":"var_name","value":"result","jsValue":"result_"},{"name":"__model__"},{"name":"entities","value":"result","usedVars":["result"],"jsValue":"result_"},{"name":"tolerance","value":"0.1","usedVars":[],"jsValue":"0.1"}],"variable":"result"},{"type":14,"ID":"prod-xupbz7gsq9q","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"double offset to get rid of spikes and sharp corners"}]},{"type":8,"ID":"prod-9byxqr97xk","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"result","jsValue":"result_"},{"name":"__model__"},{"name":"entities","value":"result","usedVars":["result"],"jsValue":"result_"},{"name":"dist","value":"-3","usedVars":[],"jsValue":"-3"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"result"},{"type":8,"ID":"prod-fzurx6x09r","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"result","jsValue":"result_"},{"name":"__model__"},{"name":"entities","value":"result","usedVars":["result"],"jsValue":"result_"},{"name":"dist","value":"3","usedVars":[],"jsValue":"3"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"result"},{"type":8,"ID":"prod-jlr4rhbm28e","enabled":true,"print":false,"meta":{"module":"edit","name":"Delete"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"result","usedVars":["result"],"jsValue":"result_"},{"name":"method","value":"'keep_selected'","usedVars":[],"jsValue":"'keep_selected'"}]},{"type":14,"ID":"prod-lamiefk1cp8","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"remove any polygons with a very small area"}]},{"type":4,"ID":"prod-158rj9op7qu","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"pgon","jsValue":"pgon_"},{"name":"list","value":"#pg","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pg', null)"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~14","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~14","ID":"prod-vu5raqgrp4","enabled":true,"print":false,"meta":{"module":"calc","name":"Area"},"argCount":3,"args":[{"name":"var_name","value":"area","jsValue":"area_"},{"name":"__model__"},{"name":"entities","value":"pgon","usedVars":["pgon"],"jsValue":"pgon_"}],"variable":"area"},{"type":1,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~14","ID":"prod-tyff7vnab1g","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"area < 100","usedVars":["area"],"jsValue":"area_ < 100"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~14~children~2","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~14~children~2","ID":"prod-s1imtt7hwe","enabled":true,"print":false,"meta":{"module":"edit","name":"Delete"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"pgon","usedVars":["pgon"],"jsValue":"pgon_"},{"name":"method","value":"'delete_selected'","usedVars":[],"jsValue":"'delete_selected'"}]}]}],"variable":"pgon"},{"type":14,"ID":"prod-eay0k60j22q","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"add some color"}]},{"type":0,"ID":"prod-pgh7ajyrz0s","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"pgons","jsValue":"pgons_"},{"name":"value","value":"#pg","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pg', null)"}],"variable":"pgons"},{"type":8,"ID":"prod-3vjb0h3itsr","enabled":true,"print":false,"meta":{"module":"visualize","name":"Color"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"pgons","usedVars":["pgons"],"jsValue":"pgons_"},{"name":"color","value":"[0.8, 1, 0.8]","usedVars":[],"jsValue":"[0.8, 1, 0.8]"}]},{"type":8,"ID":"prod-klrujpby","enabled":true,"print":false,"meta":{"module":"modify","name":"Move"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"pgons","usedVars":["pgons"],"jsValue":"pgons_"},{"name":"vectors","value":"[0, 0, 0.2]","usedVars":[],"jsValue":"[0, 0, 0.2]"}]}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"input":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target","output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output","target":{"name":"input","type":0,"edges":["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"Generate Buildings","id":"node_642hpsef08d","position":{"x":5200,"y":5500},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"ID":"prod-q13vyq3jq4n","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"pgons","jsValue":"pgons_"},{"name":"value","value":"#pg","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pg', null)"}],"variable":"pgons"},{"type":8,"ID":"prod-s0hyxhi32q","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"holes","jsValue":"holes_"},{"name":"__model__"},{"name":"entities","value":"pgons","usedVars":["pgons"],"jsValue":"pgons_"},{"name":"dist","value":"-16","usedVars":[],"jsValue":"-16"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"holes"},{"type":8,"ID":"prod-qnxtkfgfk6","enabled":true,"print":true,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"holes","jsValue":"holes_"},{"name":"__model__"},{"name":"entities","value":"holes","usedVars":["holes"],"jsValue":"holes_"},{"name":"dist","value":"3","usedVars":[],"jsValue":"3"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"holes","selectGeom":false},{"type":8,"ID":"prod-4fj3q6aqw1e","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"footprints","jsValue":"footprints_"},{"name":"__model__"},{"name":"entities","value":"pgons","usedVars":["pgons"],"jsValue":"pgons_"},{"name":"dist","value":"-6","usedVars":[],"jsValue":"-6"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"footprints","selectGeom":false},{"type":8,"ID":"prod-torroq4tf1","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"footprints","jsValue":"footprints_"},{"name":"__model__"},{"name":"entities","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"},{"name":"dist","value":"4","usedVars":[],"jsValue":"4"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"footprints","selectGeom":false},{"type":8,"ID":"prod-ksli4ouir1h","enabled":true,"print":false,"meta":{"module":"poly2d","name":"Boolean"},"argCount":5,"args":[{"name":"var_name","value":"footprints","jsValue":"footprints_"},{"name":"__model__"},{"name":"a_entities","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"},{"name":"b_entities","value":"holes","usedVars":["holes"],"jsValue":"holes_"},{"name":"method","value":"'difference'","jsValue":"'difference'","usedVars":[]}],"variable":"footprints"},{"type":8,"ID":"prod-abqbbnkzzyh","enabled":true,"print":false,"meta":{"module":"modify","name":"Move"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"},{"name":"vectors","value":"[0, 0, 0.3]","usedVars":[],"jsValue":"[0, 0, 0.3]"}]},{"type":8,"ID":"prod-gswxzlggd9p","enabled":true,"print":false,"meta":{"module":"edit","name":"Delete"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"[pgons, footprints]","usedVars":["pgons","footprints"],"jsValue":"[pgons_, footprints_]"},{"name":"method","value":"'keep_selected'","usedVars":[],"jsValue":"'keep_selected'"}]},{"type":4,"ID":"prod-ke6jfo12ah","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"footprint","jsValue":"footprint_"},{"name":"list","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9","ID":"prod-5xiublkd1yd","enabled":true,"print":false,"meta":{"module":"edit","name":"Divide"},"argCount":5,"args":[{"name":"var_name","value":"div","jsValue":"div_"},{"name":"__model__"},{"name":"entities","value":"footprint","usedVars":["footprint"],"jsValue":"footprint_"},{"name":"divisor","value":"6","usedVars":[],"jsValue":"6"},{"name":"method","value":"'by_max_length'","usedVars":[],"jsValue":"'by_max_length'"}],"variable":"div"},{"type":8,"ID":"prod-u1xjg3t98up","enabled":true,"print":false,"meta":{"module":"make","name":"Extrude"},"argCount":6,"args":[{"name":"var_name","value":"bldg","jsValue":"bldg_"},{"name":"__model__"},{"name":"entities","value":"footprint","usedVars":["footprint"],"jsValue":"footprint_"},{"name":"dist","value":"9","usedVars":[],"jsValue":"9"},{"name":"divisions","value":"3","usedVars":[],"jsValue":"3"},{"name":"method","value":"'quads'","jsValue":"'quads'","usedVars":[]}],"variable":"bldg","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9"},{"type":8,"ID":"prod-g7fbuzwn8oj","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"roof","jsValue":"roof_"},{"name":"__model__"},{"name":"entities","value":"bldg[-1]","usedVars":["bldg"],"jsValue":"bldg_[pythonList(-1, bldg_.length)]"},{"name":"dist","value":"0.3","usedVars":[],"jsValue":"0.3"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"roof","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9"},{"type":8,"ID":"prod-a7t42uwwhw5","enabled":true,"print":false,"meta":{"module":"modify","name":"Move"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"roof","usedVars":["roof"],"jsValue":"roof_"},{"name":"vectors","value":"[0, 0, 9.4]","usedVars":[],"jsValue":"[0, 0, 9.4]"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9"},{"type":8,"ID":"prod-tv9q9l1lw1a","enabled":true,"print":false,"meta":{"module":"make","name":"Extrude"},"argCount":6,"args":[{"name":"var_name","value":"roof","jsValue":"roof_"},{"name":"__model__"},{"name":"entities","value":"roof","usedVars":["roof"],"jsValue":"roof_"},{"name":"dist","value":"0.3","usedVars":[],"jsValue":"0.3"},{"name":"divisions","value":"1","usedVars":[],"jsValue":"1"},{"name":"method","value":"'quads'","jsValue":"'quads'","usedVars":[]}],"variable":"roof","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9"},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9","ID":"prod-lfk3btr6ct","enabled":true,"print":false,"meta":{"module":"visualize","name":"Color"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"roof","usedVars":["roof"],"jsValue":"roof_"},{"name":"color","value":"[1, 0.8, 0.8]","usedVars":[],"jsValue":"[1, 0.8, 0.8]"}]}],"variable":"footprint"}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"input":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target","output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output","target":{"name":"input","type":0,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output","target":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target","selected":false},"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"End","id":"node_r6j5g2xzx3","position":{"x":5380,"y":5580},"enabled":true,"type":"end","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":11,"ID":"Return","meta":{"name":"","module":""},"argCount":2,"args":[{"name":"__model__","value":"","jsValue":""},{"name":"value","value":"","jsValue":"","usedVars":[]}],"print":false,"enabled":true,"selectGeom":false}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"input":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target","output":{"name":"output","type":1,"edges":[],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"},"hasError":false,"hasExecuted":true,"model":7}},"selected":false}],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"},"hasExecuted":true,"hasError":false,"model":6}},"selected":false}],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"},"hasError":false,"hasExecuted":true,"model":5}},"selected":false},"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~0"],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode"},"hasError":false,"hasExecuted":true,"model":4}},"selected":false}],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode"},"model":3}},"selected":false}],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0"},"hasError":false,"hasExecuted":true,"model":2},"~flowchart~nodes~0~output~edges~0~target~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"],"edges":["~flowchart~nodes~0~output~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"],"functions":[],"ordered":true,"last_updated":"2020-12-29T08:12:31.114Z"},"version":"0.7.1","settings":"{\"normals\":{\"show\":false,\"size\":5},\"axes\":{\"show\":true,\"size\":50},\"grid\":{\"show\":true,\"size\":500,\"pos_x\":0,\"pos_y\":0,\"pos_z\":0,\"pos\":{\"x\":0,\"y\":0,\"z\":0}},\"background\":{\"show\":false,\"background_set\":0},\"positions\":{\"show\":true,\"size\":0.5},\"tjs_summary\":{\"show\":false},\"gi_summary\":{\"show\":false},\"wireframe\":{\"show\":false},\"camera\":{\"pos\":{\"x\":-79.99999999999974,\"y\":-79.99999999999979,\"z\":79.99999999999982},\"target\":{\"x\":0,\"y\":0,\"z\":0},\"ortho\":false},\"colors\":{\"viewer_bg\":\"#E6E6E6\",\"position\":\"#000000\",\"position_s\":\"#0033FF\",\"vertex_s\":\"#FFCC00\",\"face_f\":\"#FFFFFF\",\"face_f_s\":\"#4949BD\",\"face_b\":\"#DDDDDD\",\"face_b_s\":\"#00006D\"},\"ambient_light\":{\"show\":true,\"color\":\"#FFFFFF\",\"intensity\":0.5},\"hemisphere_light\":{\"show\":true,\"helper\":false,\"skyColor\":\"#FFFFFF\",\"groundColor\":\"#FFFFFF\",\"intensity\":0.5},\"directional_light\":{\"show\":false,\"helper\":false,\"color\":\"#FFFFFF\",\"intensity\":1,\"shadow\":true,\"azimuth\":90,\"altitude\":45,\"distance\":10,\"type\":\"directional\",\"shadowSize\":2048},\"ground\":{\"show\":false,\"width\":1000,\"length\":1000,\"height\":-0.5,\"color\":\"#FFFFFF\",\"shininess\":0},\"select\":{\"selector\":{\"id\":7,\"name\":\"Polygons\"},\"tab\":\"0\",\"enabledselector\":{\"ps\":true,\"_v\":true,\"_e\":true,\"_w\":true,\"_f\":true,\"pt\":true,\"pl\":true,\"pg\":true,\"co\":true}},\"version\":\"0.5.77\"}"}