{"name":"Floor_area_constraint","author":"new_user","flowchart":{"id":"9a00d98e-d15f-d7bc-07cc-0f0e61b37639","name":"Floor area constraint example","description":"Plot ratio","language":"js","meta":{"selected_nodes":[0]},"nodes":[{"name":"Start","id":"node_u4fynz2qgji","position":{"x":5340,"y":4860},"enabled":true,"type":"start","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":10,"ID":"prod-sy189oc8nz9","enabled":true,"print":false,"argCount":2,"meta":{"module":"Input","name":"Constant","inputMode":1,"description":"The random seed used for assign the relative building heights."},"args":[{"name":"const_name","value":"RAND_SEED","jsValue":"RAND_SEED_"},{"name":"__input__","value":0.279,"step":"0.001","min":"0","max":"1"}]},{"type":10,"ID":"prod-uby5n72q0yr","enabled":true,"print":false,"argCount":2,"meta":{"module":"Input","name":"Constant","inputMode":1,"description":"Plot Ratio constraint"},"args":[{"name":"const_name","value":"PLOT_RATIO","jsValue":"PLOT_RATIO_"},{"name":"__input__","value":6.2,"step":"0.01","min":"1","max":"10"}],"selectGeom":false},{"type":10,"ID":"prod-ipg8qmpg3i","enabled":true,"print":false,"argCount":2,"meta":{"module":"Input","name":"Constant","inputMode":1,"description":"Minimum number of floors"},"args":[{"name":"const_name","value":"MIN_NUM_FLOORS","jsValue":"MIN_NUM_FLOORS_"},{"name":"__input__","value":5,"step":"1","min":"0","max":"10"}],"selectGeom":false},{"type":10,"ID":"prod-pprnr2ejy79","enabled":true,"print":false,"argCount":2,"meta":{"module":"Input","name":"Constant","inputMode":1,"description":"Maximum number of floors"},"args":[{"name":"const_name","value":"MAX_NUM_FLOORS","jsValue":"MAX_NUM_FLOORS_"},{"name":"__input__","value":11,"step":"1","min":"5","max":"20"}],"selectGeom":false},{"type":10,"ID":"prod-290li77bya5","enabled":true,"print":false,"argCount":2,"meta":{"module":"Input","name":"Constant","inputMode":6,"description":"The number of constraints. \n- When set to 'one_constraint', only the plot ratio is enforced. \n- When set to 'two_constraints', plot ratio and minimum floors is enforced.\n- when set to three constraints, plot ratio, minimum floors, and maximum floors are all enforced."},"args":[{"name":"const_name","value":"NUM_CONSTRAINTS","jsValue":"NUM_CONSTRAINTS_"},{"name":"__input__","value":"\"three_constraints\"","max":"[\"one_constraint\", \"two_constraints\", \"three_constraints\"]","min":["\"one_constraint\"","\"two_constraints\"","\"three_constraints\""]}]}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":false,"show_func":false},"input":{"name":"input","type":0,"edges":[],"meta":{"mode":0,"opts":{}},"parentNode":"~flowchart~nodes~0"},"output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output","target":{"name":"input","type":0,"edges":["~flowchart~nodes~0~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"Skeleton","id":"node_p0c8ycqf5p","position":{"x":5340,"y":4960},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"ID":"prod-9fenvyu60o6","enabled":true,"print":false,"meta":{"module":"pattern","name":"Rectangle"},"argCount":4,"args":[{"name":"var_name","value":"r1","jsValue":"r1_"},{"name":"__model__"},{"name":"origin","value":"XY","usedVars":[],"jsValue":"JSON.parse(JSON.stringify(XY))"},{"name":"size","value":"123","usedVars":[],"jsValue":"123"}],"variable":"r1","selectGeom":false},{"type":8,"ID":"prod-ltoq0ofcawr","enabled":true,"print":false,"meta":{"module":"modify","name":"Move"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"r1[0]","usedVars":["r1"],"jsValue":"r1_[pythonList(0, r1_.length)]"},{"name":"vectors","value":"[-100, 0, 0]","usedVars":[],"jsValue":"[-100, 0, 0]"}]},{"type":8,"ID":"prod-80lq7pvrz4b","enabled":true,"print":false,"meta":{"module":"make","name":"Polygon"},"argCount":3,"args":[{"name":"var_name","value":"base_pgon","jsValue":"base_pgon_"},{"name":"__model__"},{"name":"entities","value":"r1","usedVars":["r1"],"jsValue":"r1_"}],"variable":"base_pgon","selectGeom":false}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"hasError":false,"hasExecuted":true,"input":"~flowchart~nodes~0~output~edges~0~target","output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output","target":{"name":"input","type":0,"edges":["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"Plan","id":"node_em2wzjvqzea","position":{"x":5160,"y":5100},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":14,"ID":"prod-h1v4u281ul","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Get the base polygon"}]},{"type":0,"ID":"prod-m0wtimhibdf","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"base_pgon","jsValue":"base_pgon_"},{"name":"value","value":"#pg","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pg', null)"}],"variable":"base_pgon"},{"type":14,"ID":"prod-myiuc2qd15r","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Create chamfered corners"}]},{"type":8,"ID":"prod-hkc6madnqd","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"temp_pgon","jsValue":"temp_pgon_"},{"name":"__model__"},{"name":"entities","value":"base_pgon","usedVars":["base_pgon"],"jsValue":"base_pgon_"},{"name":"dist","value":"-20","usedVars":[],"jsValue":"-20"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"selectGeom":false,"variable":"temp_pgon"},{"type":8,"ID":"prod-qu8sdjp9xw","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"cham","jsValue":"cham_"},{"name":"__model__"},{"name":"entities","value":"temp_pgon","usedVars":["temp_pgon"],"jsValue":"temp_pgon_"},{"name":"dist","value":"20","usedVars":[],"jsValue":"20"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"selectGeom":false,"variable":"cham"},{"type":14,"ID":"prod-lprlkws5s9","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Voronoi subdivide"}]},{"type":8,"ID":"prod-i5syn0zr6xe","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"offset_pgon","jsValue":"offset_pgon_"},{"name":"__model__"},{"name":"entities","value":"base_pgon","usedVars":["base_pgon"],"jsValue":"base_pgon_"},{"name":"dist","value":"-30","usedVars":[],"jsValue":"-30"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"offset_pgon"},{"type":8,"ID":"prod-89uvp0l9lau","enabled":true,"print":false,"meta":{"module":"edit","name":"Divide"},"argCount":5,"args":[{"name":"var_name","value":"div","jsValue":"div_"},{"name":"__model__"},{"name":"entities","value":"offset_pgon","usedVars":["offset_pgon"],"jsValue":"offset_pgon_"},{"name":"divisor","value":"20","usedVars":[],"jsValue":"20"},{"name":"method","value":"'by_max_length'","usedVars":[],"jsValue":"'by_max_length'"}],"variable":"div"},{"type":8,"ID":"prod-vpyuedrc3jo","enabled":true,"print":false,"meta":{"module":"poly2d","name":"Voronoi"},"argCount":4,"args":[{"name":"var_name","value":"voronoi_cells","jsValue":"voronoi_cells_"},{"name":"__model__"},{"name":"pgons","value":"base_pgon","usedVars":["base_pgon"],"jsValue":"base_pgon_"},{"name":"entities","value":"offset_pgon","usedVars":["offset_pgon"],"jsValue":"offset_pgon_"}],"variable":"voronoi_cells","selectGeom":false},{"type":14,"ID":"prod-xgqc5n1s0i","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Cut hole in the middle"}]},{"type":8,"ID":"prod-veeeqggzyx","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetChamfer"},"argCount":5,"args":[{"name":"var_name","value":"middle_pgon","jsValue":"middle_pgon_"},{"name":"__model__"},{"name":"entities","value":"base_pgon","usedVars":["base_pgon"],"jsValue":"base_pgon_"},{"name":"dist","value":"-30","usedVars":[],"jsValue":"-30"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"middle_pgon","selectGeom":false},{"type":8,"ID":"prod-7vy3kjo6v6j","enabled":true,"print":false,"meta":{"module":"poly2d","name":"Boolean"},"argCount":5,"args":[{"name":"var_name","value":"footprints","jsValue":"footprints_"},{"name":"__model__"},{"name":"a_entities","value":"voronoi_cells","usedVars":["voronoi_cells"],"jsValue":"voronoi_cells_"},{"name":"b_entities","value":"middle_pgon","usedVars":["middle_pgon"],"jsValue":"middle_pgon_"},{"name":"method","value":"'difference'","jsValue":"'difference'","usedVars":[]}],"variable":"footprints"},{"type":8,"ID":"prod-gr4j4dsfqe9","enabled":true,"print":false,"meta":{"module":"poly2d","name":"Boolean"},"argCount":5,"args":[{"name":"var_name","value":"footprints","jsValue":"footprints_"},{"name":"__model__"},{"name":"a_entities","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"},{"name":"b_entities","value":"cham","usedVars":["cham"],"jsValue":"cham_"},{"name":"method","value":"'intersect'","jsValue":"'intersect'","usedVars":[]}],"variable":"footprints"},{"type":14,"ID":"prod-d0q4s7inoet","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Clean up"}]},{"type":8,"ID":"prod-94kl3qtvpb5","enabled":true,"print":false,"meta":{"module":"edit","name":"Delete"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"},{"name":"method","value":"'keep_selected'","usedVars":[],"jsValue":"'keep_selected'"}],"selectGeom":false},{"type":8,"ID":"prod-ujz7as6ltjm","enabled":true,"print":false,"meta":{"module":"modify","name":"Move"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"},{"name":"vectors","value":"[0, 0, 0.1]","usedVars":[],"jsValue":"[0, 0, 0.1]"}]},{"type":14,"ID":"prod-7alxffgzbcm","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Calculate areas"}]},{"type":4,"ID":"prod-vvoy122ok3n","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"footprint","jsValue":"footprint_"},{"name":"list","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"}],"children":[{"type":13,"ID":"prod-cg6v4z4yi18","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~18","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~18","ID":"prod-xz2el8klk6","enabled":true,"print":false,"meta":{"module":"calc","name":"Area"},"argCount":3,"args":[{"name":"var_name","value":"pgon_area","jsValue":"pgon_area_"},{"name":"__model__"},{"name":"entities","value":"footprint","usedVars":["footprint"],"jsValue":"footprint_"}],"variable":"pgon_area","selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~18","ID":"prod-0eg0uvn2vks4","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@area","jsValue":"footprint_@area","usedVars":["footprint"]},{"name":"value","value":"round(pgon_area, 3)","usedVars":["pgon_area"],"jsValue":"round(__debug__, pgon_area_, 3)"}],"variable":null,"selectGeom":false}],"variable":"footprint","selectGeom":false},{"type":0,"ID":"prod-4q2ryagq7h","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"@total_footprint_area","jsValue":"@total_footprint_area","usedVars":[]},{"name":"value","value":"sum(footprints@area )","usedVars":["footprints"],"jsValue":"sum(__debug__,  __modules__.attrib.Get(__params__.model, footprints_, 'area'))"}],"variable":null,"selectGeom":false}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"input":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target","output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output","target":{"name":"input","type":0,"edges":["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"Calculate Relative Area","id":"node_vyo9ex8lkhq","position":{"x":5160,"y":5220},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":14,"ID":"prod-x0xa8r3yla","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Get the footprints"}]},{"type":0,"ID":"prod-zt23l7cj7k","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprints","jsValue":"footprints_"},{"name":"value","value":"#pg","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pg', null)"}],"variable":"footprints"},{"type":14,"ID":"prod-krr62pv0ims","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Calc rel_area"}]},{"type":0,"ID":"prod-66cair5gs8c","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"rand_seed2","jsValue":"rand_seed2_"},{"name":"value","value":"RAND_SEED","usedVars":["RAND_SEED"],"jsValue":"RAND_SEED_"}],"variable":"rand_seed2","selectGeom":false},{"type":4,"ID":"prod-1tefie2uzo5","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"footprint","jsValue":"footprint_"},{"name":"list","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~5","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"ID":"prod-bttoxxsjj8f","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"rand_seed2","jsValue":"rand_seed2_"},{"name":"value","value":"rand_seed2 + 1","usedVars":["rand_seed2"],"jsValue":"rand_seed2_ + 1"}],"variable":"rand_seed2","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~5"},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~5","ID":"prod-lt6pltda3jh","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@rel_height","jsValue":"footprint_@rel_height","usedVars":["footprint"]},{"name":"value","usedVars":["rand_seed2"],"value":"round(rand(0, 1, rand_seed2 + 0.1234), 3)","jsValue":"round(__debug__, rand(__debug__, 0, 1, rand_seed2_ + 0.1234), 3)"}],"selectGeom":false,"variable":null},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~5","ID":"prod-ye48z7x73r","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@rel_area","jsValue":"footprint_@rel_area","usedVars":["footprint"]},{"name":"value","usedVars":["footprint"],"value":"round(footprint@rel_height * footprint@area , 3)","jsValue":"round(__debug__,  __modules__.attrib.Get(__params__.model, footprint_, 'rel_height')*  __modules__.attrib.Get(__params__.model, footprint_, 'area'), 3)"}],"selectGeom":false,"variable":null}],"variable":"footprint"},{"type":0,"ID":"prod-dbwa6rwfow","enabled":false,"print":false,"argCount":2,"args":[{"name":"var_name","value":"cc","jsValue":"cc_"},{"name":"value","value":"#pg","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pg', null)"}],"variable":"cc","selectGeom":true}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"hasError":false,"hasExecuted":true,"input":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target","output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output","target":{"name":"input","type":0,"edges":["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"Calc Number of Floors","id":"node_mi8h6804f7c","position":{"x":5160,"y":5340},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":14,"ID":"prod-9yqe5wrjzmv","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Calculate target area"}],"selectGeom":false},{"type":0,"ID":"prod-jarli9kvcva","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"target_floor_area","jsValue":"target_floor_area_"},{"name":"value","value":"PLOT_RATIO * @total_footprint_area","usedVars":["PLOT_RATIO"],"jsValue":"PLOT_RATIO_ *  __modules__.attrib.Get(__params__.model, null, 'total_footprint_area')"}],"variable":"target_floor_area","selectGeom":false},{"type":14,"ID":"prod-ra5tgpu033m","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Get the footprint polygons"}],"selectGeom":false},{"type":0,"ID":"prod-ihnrrr9arf","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprints","jsValue":"footprints_"},{"name":"value","value":"#pg","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pg', null)"}],"variable":"footprints","selectGeom":false},{"type":0,"ID":"prod-t6xf30371g","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"rel_area_total","jsValue":"rel_area_total_"},{"name":"value","value":"sum(footprints@rel_area )","usedVars":["footprints"],"jsValue":"sum(__debug__,  __modules__.attrib.Get(__params__.model, footprints_, 'rel_area'))"}],"variable":"rel_area_total","selectGeom":false},{"type":14,"ID":"prod-59wrvo6xtmd","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Loop through each footprint"}],"selectGeom":false},{"type":1,"ID":"prod-fwgm1dfj55i","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"NUM_CONSTRAINTS == 'one_constraint'","usedVars":["NUM_CONSTRAINTS"],"jsValue":"NUM_CONSTRAINTS_ == 'one_constraint'"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":18,"ID":"prod-km1pgq50lpk","enabled":true,"print":false,"argCount":2,"meta":{"module":"localFunc","name":"oneConstraint","otherInfo":{"deletedArgs":[{"name":"rel_area_total","usedVars":["rel_area_total"],"linked":false,"value":"rel_area_total","jsValue":"rel_area_total_","invalidVar":false},{"name":"target_floor_area","usedVars":["target_floor_area"],"linked":false,"value":"target_floor_area","jsValue":"target_floor_area_","invalidVar":false}]}},"args":[{"name":"__none__"},{"name":"footprints","usedVars":["footprints"],"value":"footprints","jsValue":"footprints_"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7"}]},{"type":2,"ID":"prod-8y44n7vk2qe","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"NUM_CONSTRAINTS == 'two_constraint'","usedVars":["NUM_CONSTRAINTS"],"jsValue":"NUM_CONSTRAINTS_ == 'two_constraint'"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":18,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8","ID":"prod-jr2fhi9rshr","enabled":true,"print":false,"argCount":2,"meta":{"module":"localFunc","name":"twoConstraints","otherInfo":{"deletedArgs":[{"name":"rel_area_total","value":"rel_area_total","linked":false,"usedVars":["rel_area_total"],"jsValue":"rel_area_total_","invalidVar":false},{"name":"target_floor_area","value":"target_floor_area","linked":false,"usedVars":["target_floor_area"],"jsValue":"target_floor_area_","invalidVar":false}]}},"args":[{"name":"__none__"},{"name":"footprints","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"}]}]},{"type":3,"ID":"prod-t6tu4kui4e","enabled":true,"print":false,"argCount":0,"args":[],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":18,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~9","ID":"prod-ex67w44d1w4","enabled":true,"print":false,"argCount":2,"meta":{"module":"localFunc","name":"threeConstraints","otherInfo":{"deletedArgs":[{"name":"rel_area_total","value":"rel_area_total","linked":false,"usedVars":["rel_area_total"],"jsValue":"rel_area_total_","invalidVar":false},{"name":"target_floor_area","value":"target_floor_area","linked":false,"usedVars":["target_floor_area"],"jsValue":"target_floor_area_","invalidVar":false}]}},"args":[{"name":"__none__"},{"name":"footprints","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"}]}]},{"type":14,"ID":"prod-h1rqxfwjlov","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Create a collection"}],"selectGeom":false},{"type":8,"ID":"prod-b0bbyr6zxbb","enabled":true,"print":false,"meta":{"module":"collection","name":"Create"},"argCount":4,"args":[{"name":"var_name","value":"coll","jsValue":"coll_"},{"name":"__model__"},{"name":"entities","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"},{"name":"name","value":"\"footprints\"","usedVars":[],"jsValue":"\"footprints\""}],"variable":"coll","selectGeom":false}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":16,"ID":"prod-kbryidxv4ak","enabled":true,"print":false,"argCount":2,"meta":{"module":"","name":"","otherInfo":{"prev_name":"oneConstraint","num_returns":0,"collapsed":false,"deletedArgs":[{"name":"arg_3","value":"rel_area_total","jsValue":"rel_area_total_","invalidVar":false,"usedVars":["rel_area_total"],"linked":false},{"name":"arg_2","value":"target_floor_area","jsValue":"target_floor_area_","invalidVar":false,"usedVars":["target_floor_area"],"linked":false}]}},"args":[{"name":"func_name","value":"oneConstraint","jsValue":"oneConstraint_"},{"name":"arg_1","value":"footprints","jsValue":"footprints_","usedVars":["footprints"]}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":14,"ID":"prod-4zl19nbrurn","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Calculate target area"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1"},{"type":0,"ID":"prod-islidrcggbs","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"target_floor_area","jsValue":"target_floor_area_"},{"name":"value","value":"PLOT_RATIO * @total_footprint_area","usedVars":["PLOT_RATIO"],"jsValue":"PLOT_RATIO_ *  __modules__.attrib.Get(__params__.model, null, 'total_footprint_area')"}],"variable":"target_floor_area","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1"},{"type":14,"ID":"prod-69y8dxn2pvf","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Get the footprint polygons"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1"},{"type":0,"ID":"prod-49ud24ie83x","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"rel_area_total","jsValue":"rel_area_total_"},{"name":"value","value":"sum(footprints@rel_area )","usedVars":["footprints"],"jsValue":"sum(__debug__,  __modules__.attrib.Get(__params__.model, footprints_, 'rel_area'))"}],"variable":"rel_area_total","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1"},{"type":14,"ID":"prod-e8ksz4g36vb","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Loop through each footprint"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1"},{"type":4,"ID":"prod-ph39vfm67ga","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"footprint","jsValue":"footprint_"},{"name":"list","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"}],"children":[{"type":13,"ID":"prod-7fsehw4vdnt","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~6","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~6","ID":"prod-vpzptitvqz9","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@percent_area","jsValue":"footprint_@percent_area","usedVars":["footprint"]},{"name":"value","usedVars":["rel_area_total","footprint"],"value":"round((footprint@rel_area / rel_area_total) * 100, 1)","jsValue":"round(__debug__, ( __modules__.attrib.Get(__params__.model, footprint_, 'rel_area')/ rel_area_total_) * 100, 1)"}],"selectGeom":false,"variable":null},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~6","ID":"prod-4tffhy9ksma","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"bldg_floor_area","jsValue":"bldg_floor_area_","usedVars":["pgon"]},{"name":"value","usedVars":["target_floor_area","footprint"],"value":"footprint@percent_area * target_floor_area / 100","jsValue":"__modules__.attrib.Get(__params__.model, footprint_, 'percent_area')* target_floor_area_ / 100"}],"selectGeom":false,"variable":"bldg_floor_area"},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~6","ID":"prod-86x7owh3ty7","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@num_floors","jsValue":"footprint_@num_floors","usedVars":["footprint"]},{"name":"value","usedVars":["bldg_floor_area","footprint"],"value":"floor(bldg_floor_area / footprint@area )","jsValue":"floor(__debug__, bldg_floor_area_ /  __modules__.attrib.Get(__params__.model, footprint_, 'area'))"}],"selectGeom":false,"variable":null}],"variable":"footprint","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1"}],"variable":null},{"type":16,"ID":"prod-a88y28b7axk","enabled":true,"print":false,"argCount":2,"meta":{"module":"","name":"","otherInfo":{"prev_name":"twoConstraints","num_returns":0,"collapsed":false,"deletedArgs":[{"name":"arg_3","value":"rel_area_total","jsValue":"rel_area_total_","linked":false,"invalidVar":false,"usedVars":["rel_area_total"]},{"name":"arg_2","value":"target_floor_area","jsValue":"target_floor_area_","linked":false,"invalidVar":false,"usedVars":["target_floor_area"]}]}},"args":[{"name":"func_name","value":"twoConstraints","jsValue":"twoConstraints_"},{"name":"arg_1","value":"footprints","jsValue":"footprints_","usedVars":["footprints"]}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":14,"ID":"prod-9x9av0nt7i","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Calculate the target area, base area, upper area"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2"},{"type":0,"ID":"prod-2ews7arpa9i","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"target_floor_area","jsValue":"target_floor_area_"},{"name":"value","value":"PLOT_RATIO * @total_footprint_area","usedVars":["PLOT_RATIO"],"jsValue":"PLOT_RATIO_ *  __modules__.attrib.Get(__params__.model, null, 'total_footprint_area')"}],"variable":"target_floor_area","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2"},{"type":0,"ID":"prod-h0rhj3at74","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"base_area","jsValue":"base_area_"},{"name":"value","value":"@area_total * MIN_NUM_FLOORS","usedVars":["MIN_NUM_FLOORS"],"jsValue":"__modules__.attrib.Get(__params__.model, null, 'area_total')* MIN_NUM_FLOORS_"}],"variable":"base_area","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2"},{"type":0,"ID":"prod-te87dwuiy5c","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"upper_area","jsValue":"upper_area_"},{"name":"value","value":"target_floor_area - base_area","usedVars":["target_floor_area","base_area"],"jsValue":"target_floor_area_ - base_area_"}],"variable":"upper_area","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2"},{"type":1,"ID":"prod-v8itve6mdd9","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"upper_area < 0","usedVars":["upper_area"],"jsValue":"upper_area_ < 0"}],"children":[{"type":13,"ID":"prod-tddsau8ovl","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2~children~5","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2~children~5","ID":"prod-kffwbu5r68r","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"upper_area","jsValue":"upper_area_"},{"name":"value","value":"0","usedVars":[],"jsValue":"0"}],"variable":"upper_area","selectGeom":false}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2"},{"type":14,"ID":"prod-iazptt05j9","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Get the footprint polygons"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2"},{"type":0,"ID":"prod-g3niehmslo7","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"rel_area_total","jsValue":"rel_area_total_"},{"name":"value","value":"sum(footprints@rel_area )","usedVars":["footprints"],"jsValue":"sum(__debug__,  __modules__.attrib.Get(__params__.model, footprints_, 'rel_area'))"}],"variable":"rel_area_total","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2"},{"type":14,"ID":"prod-zig7qcq0oud","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Loop through each footprint"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2"},{"type":4,"ID":"prod-p992d8rfz6","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"footprint","jsValue":"footprint_"},{"name":"list","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"}],"children":[{"type":13,"ID":"prod-lavoe1lxo5i","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2~children~9","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2~children~9","ID":"prod-c4w22a8wwad","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@percent_area","jsValue":"footprint_@percent_area","usedVars":["footprint"]},{"name":"value","usedVars":["rel_area_total","footprint"],"value":"round((footprint@rel_area / rel_area_total) * 100, 1)","jsValue":"round(__debug__, ( __modules__.attrib.Get(__params__.model, footprint_, 'rel_area')/ rel_area_total_) * 100, 1)"}],"selectGeom":false,"variable":null},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2~children~9","ID":"prod-puktcfq39k","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"bldg_floor_area","jsValue":"bldg_floor_area_","usedVars":["pgon"]},{"name":"value","usedVars":["upper_area","footprint"],"value":"(footprint@percent_area / 100) * upper_area","jsValue":"( __modules__.attrib.Get(__params__.model, footprint_, 'percent_area')/ 100) * upper_area_"}],"selectGeom":false,"variable":"bldg_floor_area"},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2~children~9","ID":"prod-gh9rimrdp94","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@num_floors","jsValue":"footprint_@num_floors","usedVars":["footprint"]},{"name":"value","usedVars":["MIN_NUM_FLOORS","bldg_floor_area","footprint"],"value":"MIN_NUM_FLOORS + floor(bldg_floor_area / footprint@area )","jsValue":"MIN_NUM_FLOORS_ + floor(__debug__, bldg_floor_area_ /  __modules__.attrib.Get(__params__.model, footprint_, 'area'))"}],"selectGeom":false,"variable":null}],"variable":"footprint","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2"}],"variable":null},{"type":16,"ID":"prod-9xja56iiq8q","enabled":true,"print":false,"argCount":2,"meta":{"module":"","name":"","otherInfo":{"prev_name":"threeConstraints","num_returns":0,"collapsed":false,"deletedArgs":[{"name":"arg_3","value":"rel_area_total","jsValue":"rel_area_total_","linked":false,"invalidVar":false,"usedVars":["rel_area_total"]},{"name":"arg_2","value":"target_floor_area","jsValue":"target_floor_area_","linked":false,"invalidVar":false,"usedVars":["target_floor_area"]}]}},"args":[{"name":"func_name","value":"threeConstraints","jsValue":"threeConstraints_"},{"name":"arg_1","value":"footprints","jsValue":"footprints_","usedVars":["footprints"]}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":14,"ID":"prod-n3gfytftp1j","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Calculate target area, base area , and upper area"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"},{"type":0,"ID":"prod-ba5t9ul3fhr","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"target_floor_area","jsValue":"target_floor_area_"},{"name":"value","value":"PLOT_RATIO * @total_footprint_area","usedVars":["PLOT_RATIO"],"jsValue":"PLOT_RATIO_ *  __modules__.attrib.Get(__params__.model, null, 'total_footprint_area')"}],"variable":"target_floor_area","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"},{"type":0,"ID":"prod-b8mz0n51sk4","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"base_area","jsValue":"base_area_"},{"name":"value","value":"@total_footprint_area * MIN_NUM_FLOORS","usedVars":["MIN_NUM_FLOORS"],"jsValue":"__modules__.attrib.Get(__params__.model, null, 'total_footprint_area')* MIN_NUM_FLOORS_"}],"variable":"base_area","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"},{"type":0,"ID":"prod-0b8mnhzyvfz8","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"upper_area","jsValue":"upper_area_"},{"name":"value","value":"target_floor_area - base_area","usedVars":["target_floor_area","base_area"],"jsValue":"target_floor_area_ - base_area_"}],"variable":"upper_area","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"},{"type":1,"ID":"prod-1f9w0teu9ol","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"upper_area < 0","usedVars":["upper_area"],"jsValue":"upper_area_ < 0"}],"children":[{"type":13,"ID":"prod-depasm45ty","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~5","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~5","ID":"prod-14xri8vh27j","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"upper_area","jsValue":"upper_area_"},{"name":"value","value":"0","usedVars":[],"jsValue":"0"}],"variable":"upper_area","selectGeom":false}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"},{"type":14,"ID":"prod-tv044oqy9wm","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Get the footprint polygons"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"},{"type":8,"ID":"prod-7kfdregp3c","enabled":true,"print":false,"meta":{"module":"query","name":"Sort"},"argCount":5,"args":[{"name":"var_name","value":"footprints","jsValue":"footprints_"},{"name":"__model__"},{"name":"entities","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"},{"name":"attrib","value":"\"rel_height\"","usedVars":[],"jsValue":"\"rel_height\""},{"name":"method_enum","value":"'descending'","jsValue":"'descending'","usedVars":[]}],"variable":"footprints","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"},{"type":14,"ID":"prod-ms15md20kim","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Search for solution"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"},{"type":0,"ID":"prod-d6tl0nklqvh","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"max_floors_satisfied","jsValue":"max_floors_satisfied_"},{"name":"value","value":"false","usedVars":[],"jsValue":"false"}],"variable":"max_floors_satisfied","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"},{"type":0,"ID":"prod-cga8zyz4drm","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"increment","jsValue":"increment_"},{"name":"value","value":"0.1","usedVars":[],"jsValue":"0.1"}],"variable":"increment","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"},{"type":5,"ID":"prod-7xek7f3tpje","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"!max_floors_satisfied","usedVars":["max_floors_satisfied"],"jsValue":"!max_floors_satisfied_"}],"children":[{"type":13,"ID":"prod-u07hj733lrc","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"ID":"prod-zxl0k2g60rj","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"max_floors_satisfied","jsValue":"max_floors_satisfied_"},{"name":"value","value":"true","usedVars":[],"jsValue":"true"}],"variable":"max_floors_satisfied","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11"},{"type":0,"ID":"prod-fku9nehus2h","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"rel_area_total","jsValue":"rel_area_total_"},{"name":"value","value":"sum(footprints@rel_area )","usedVars":["footprints"],"jsValue":"sum(__debug__,  __modules__.attrib.Get(__params__.model, footprints_, 'rel_area'))"}],"variable":"rel_area_total","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11"},{"type":14,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11","ID":"prod-wv64wmca8ur","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Test one solution"}],"selectGeom":false},{"type":4,"ID":"prod-v4wyqajjgab","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"footprint","jsValue":"footprint_"},{"name":"list","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"}],"children":[{"type":13,"ID":"prod-jiyijtmjsoe","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~4","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~4","ID":"prod-q01r0qeo4t","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@percent_area","jsValue":"footprint_@percent_area","usedVars":["footprint"]},{"name":"value","usedVars":["rel_area_total","footprint"],"value":"round((footprint@rel_area / rel_area_total) * 100, 1)","jsValue":"round(__debug__, ( __modules__.attrib.Get(__params__.model, footprint_, 'rel_area')/ rel_area_total_) * 100, 1)"}],"selectGeom":false,"variable":null},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~4","ID":"prod-0b7kmgqz0kpj","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"variable_floor_area","jsValue":"variable_floor_area_","usedVars":["pgon"]},{"name":"value","usedVars":["footprint","upper_area"],"value":"(footprint@percent_area / 100) * upper_area","jsValue":"( __modules__.attrib.Get(__params__.model, footprint_, 'percent_area')/ 100) * upper_area_"}],"selectGeom":false,"variable":"variable_floor_area"},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~4","ID":"prod-g322dqbq215","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@num_floors","jsValue":"footprint_@num_floors","usedVars":["footprint"]},{"name":"value","usedVars":["MIN_NUM_FLOORS","variable_floor_area","footprint"],"value":"MIN_NUM_FLOORS + floor(variable_floor_area / footprint@area )","jsValue":"MIN_NUM_FLOORS_ + floor(__debug__, variable_floor_area_ /  __modules__.attrib.Get(__params__.model, footprint_, 'area'))"}],"selectGeom":false,"variable":null},{"type":1,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~4","ID":"prod-2o02odp3kuo","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"footprint@num_floors > MAX_NUM_FLOORS","usedVars":["MAX_NUM_FLOORS","footprint"],"jsValue":"__modules__.attrib.Get(__params__.model, footprint_, 'num_floors')> MAX_NUM_FLOORS_"}],"children":[{"type":13,"ID":"prod-ti59amps8q","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~4~children~4","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"ID":"prod-5jczpqxv7rr","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"max_floors_satisfied","jsValue":"max_floors_satisfied_"},{"name":"value","value":"false","usedVars":[],"jsValue":"false"}],"variable":"max_floors_satisfied","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~4~children~4"},{"type":6,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~4~children~4","ID":"prod-j68quhko2af","enabled":true,"print":false,"argCount":0,"args":[],"selectGeom":false}],"selectGeom":false}],"variable":"footprint","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11"},{"type":14,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11","ID":"prod-gvazuy5sbq9","enabled":true,"print":false,"argCount":1,"args":[{"name":"comment","value":"Increment all the relative heights"}],"selectGeom":false},{"type":4,"ID":"prod-g5tg07oj7s","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"footprint","jsValue":"footprint_"},{"name":"list","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"}],"children":[{"type":13,"ID":"prod-fiso5ulbcqp","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~6","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~6","ID":"prod-mhwdcvjnsoa","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@rel_height","jsValue":"footprint_@rel_height","usedVars":["footprint"]},{"name":"value","value":"round(footprint@rel_height + increment, 3)","usedVars":["footprint","increment"],"jsValue":"round(__debug__,  __modules__.attrib.Get(__params__.model, footprint_, 'rel_height')+ increment_, 3)"}],"variable":null,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11~children~6","ID":"prod-c3ncj3wre0u","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@rel_area","jsValue":"footprint_@rel_area","usedVars":["footprint"]},{"name":"value","value":"round(footprint@rel_height * footprint@area , 3)","usedVars":["footprint"],"jsValue":"round(__debug__,  __modules__.attrib.Get(__params__.model, footprint_, 'rel_height')*  __modules__.attrib.Get(__params__.model, footprint_, 'area'), 3)"}],"variable":null,"selectGeom":false}],"variable":"footprint","selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3~children~11"}],"selectGeom":false,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~3"}],"variable":null}],"state":{"procedure":[],"show_code":true,"show_func":true},"input":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target","output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output","target":{"name":"input","type":0,"edges":["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"Extrude","id":"node_h3ifcutgph8","position":{"x":5160,"y":5460},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"ID":"prod-wcpry4wczfk","enabled":true,"print":false,"meta":{"module":"collection","name":"Get"},"argCount":3,"args":[{"name":"var_name","value":"coll","jsValue":"coll_"},{"name":"__model__"},{"name":"names","value":"\"footprints\"","usedVars":[],"jsValue":"\"footprints\""}],"variable":"coll"},{"type":0,"ID":"prod-nquf6jp8yw","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprints","jsValue":"footprints_"},{"name":"value","value":"coll#pg","usedVars":["coll"],"jsValue":"__modules__.query.Get(__params__.model, 'pg', coll_)"}],"variable":"footprints"},{"type":4,"ID":"prod-5x60kd3dkq","enabled":true,"print":false,"argCount":2,"args":[{"name":"item","value":"footprint","jsValue":"footprint_"},{"name":"list","value":"footprints","usedVars":["footprints"],"jsValue":"footprints_"}],"children":[{"type":13,"ID":"prod-qwopr2ci3r","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~3","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~3","ID":"prod-hn12ts56sf","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"footprint@actual_floor_area","jsValue":"footprint_@actual_floor_area","usedVars":["footprint"]},{"name":"value","usedVars":["footprint"],"value":"footprint@area * footprint@num_floors","jsValue":"__modules__.attrib.Get(__params__.model, footprint_, 'area')*  __modules__.attrib.Get(__params__.model, footprint_, 'num_floors')"}],"selectGeom":false,"variable":null},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~3","ID":"prod-i74htymepq","enabled":true,"print":false,"meta":{"module":"make","name":"Extrude"},"argCount":6,"args":[{"name":"var_name","value":"extruded_pgons","jsValue":"extruded_pgons_"},{"name":"__model__"},{"name":"entities","value":"footprint","usedVars":["footprint"],"jsValue":"footprint_"},{"name":"dist","value":"footprint@num_floors * 3","usedVars":["footprint"],"jsValue":"__modules__.attrib.Get(__params__.model, footprint_, 'num_floors')* 3"},{"name":"divisions","value":"footprint@num_floors","usedVars":["footprint"],"jsValue":"__modules__.attrib.Get(__params__.model, footprint_, 'num_floors')"},{"name":"method","value":"'quads'","jsValue":"'quads'","usedVars":[]}],"variable":"extruded_pgons","selectGeom":false},{"type":1,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~3","ID":"prod-kthm4sgq6g","enabled":true,"print":false,"argCount":1,"args":[{"name":"condition","value":"isList(extruded_pgons)","usedVars":["extruded_pgons"],"jsValue":"isList(__debug__, extruded_pgons_)"}],"children":[{"type":13,"ID":"","parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~3~children~3","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~3~children~3","ID":"prod-yrejqqam51","enabled":true,"print":false,"meta":{"module":"make","name":"Extrude"},"argCount":6,"args":[{"name":"var_name","value":"roof","jsValue":"roof_"},{"name":"__model__"},{"name":"entities","value":"extruded_pgons[-1]","usedVars":["extruded_pgons"],"jsValue":"extruded_pgons_[pythonList(-1, extruded_pgons_.length)]"},{"name":"dist","value":"1","usedVars":[],"jsValue":"1"},{"name":"divisions","value":"1","usedVars":[],"jsValue":"1"},{"name":"method","value":"'quads'","jsValue":"'quads'","usedVars":[]}],"variable":"roof","selectGeom":false},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~3~children~3","ID":"prod-brnaeu4947b","enabled":true,"print":false,"meta":{"module":"visualize","name":"Color"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"extruded_pgons","usedVars":["extruded_pgons"],"jsValue":"extruded_pgons_"},{"name":"color","value":"[0.9, 0.9, 1]","usedVars":[],"jsValue":"[0.9, 0.9, 1]"}],"selectGeom":false},{"type":8,"parent":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~3~children~3","ID":"prod-06epfex3lk3q","enabled":true,"print":false,"meta":{"module":"visualize","name":"Color"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"roof","usedVars":["roof"],"jsValue":"roof_"},{"name":"color","value":"[0.9, 1, 0.9]","usedVars":[],"jsValue":"[0.9, 1, 0.9]"}],"selectGeom":false}]}],"variable":"footprint","selectGeom":false}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"hasError":false,"hasExecuted":true,"input":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target","output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output","target":{"name":"input","type":0,"edges":["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"HUD","id":"node_lvgvx13u6lg","position":{"x":5160,"y":5580},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":8,"ID":"prod-ddyc427kv1s","enabled":true,"print":false,"meta":{"module":"collection","name":"Get"},"argCount":3,"args":[{"name":"var_name","value":"coll","jsValue":"coll_"},{"name":"__model__"},{"name":"names","value":"\"footprints\"","usedVars":[],"jsValue":"\"footprints\""}],"variable":"coll"},{"type":0,"ID":"prod-x9zgqyapv1","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"pgons","jsValue":"pgons_"},{"name":"value","value":"coll#pg","usedVars":["coll"],"jsValue":"__modules__.query.Get(__params__.model, 'pg', coll_)"}],"variable":"pgons"},{"type":0,"ID":"prod-k97y9rftzng","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"actual","jsValue":"actual_"},{"name":"value","value":"sum(pgons@actual_floor_area )","usedVars":["pgons"],"jsValue":"sum(__debug__,  __modules__.attrib.Get(__params__.model, pgons_, 'actual_floor_area'))"}],"variable":"actual"},{"type":0,"ID":"prod-rkycw64hxk","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"line1","jsValue":"line1_"},{"name":"value","value":"\"Required floor area: \" + round(@total_footprint_area * PLOT_RATIO) + \"m2\"","usedVars":["PLOT_RATIO"],"jsValue":"\"Required floor area: \" + round(__debug__,  __modules__.attrib.Get(__params__.model, null, 'total_footprint_area')* PLOT_RATIO_) + \"m2\""}],"variable":"line1"},{"type":0,"ID":"prod-07ri4orcnw1w","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"line2","jsValue":"line2_"},{"name":"value","value":"\"Actual floor area: \" + round(actual) + \"m2\"","usedVars":["actual"],"jsValue":"\"Actual floor area: \" + round(__debug__, actual_) + \"m2\""}],"variable":"line2","selectGeom":false},{"type":0,"ID":"prod-uqvsx9nb7s","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"@hud","jsValue":"@hud","usedVars":[]},{"name":"value","value":"line1 + \"\\n\" + line2","usedVars":["line1","line2"],"jsValue":"line1_ + \"\\n\" + line2_"}],"variable":null}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"hasError":false,"hasExecuted":true,"input":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target","output":{"name":"output","type":1,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output","target":{"name":"input","type":0,"edges":[{"source":{"name":"output","type":1,"edges":["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~0"],"meta":{"mode":0},"parentNode":{"name":"Base","id":"node_6h7tuyl4vmv","position":{"x":5500,"y":5100},"enabled":true,"type":"","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":0,"ID":"prod-rsfdir02tcp","enabled":true,"print":false,"argCount":2,"args":[{"name":"var_name","value":"base_pgon","jsValue":"base_pgon_"},{"name":"value","value":"#pg","usedVars":[],"jsValue":"__modules__.query.Get(__params__.model, 'pg', null)"}],"variable":"base_pgon","selectGeom":false},{"type":8,"ID":"prod-rn6ea0psvhq","enabled":true,"print":false,"meta":{"module":"poly2d","name":"OffsetRound"},"argCount":6,"args":[{"name":"var_name","value":"base","jsValue":"base_"},{"name":"__model__"},{"name":"entities","value":"base_pgon","usedVars":["base_pgon"],"jsValue":"base_pgon_"},{"name":"dist","value":"8","usedVars":[],"jsValue":"8"},{"name":"tolerance","value":"0.1","usedVars":[],"jsValue":"0.1"},{"name":"end_type","value":"'square_end'","jsValue":"'square_end'","usedVars":[]}],"variable":"base"},{"type":8,"ID":"prod-6xvc54gmzla","enabled":true,"print":false,"meta":{"module":"visualize","name":"Color"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"base","usedVars":["base"],"jsValue":"base_"},{"name":"color","value":"[0.9, 0.8, 0.9]","usedVars":[],"jsValue":"[0.9, 0.8, 0.9]"}]},{"type":8,"ID":"prod-sfv8cbgnq6","enabled":true,"print":false,"meta":{"module":"edit","name":"Delete"},"argCount":4,"args":[{"name":"__none__"},{"name":"__model__"},{"name":"entities","value":"base","usedVars":["base"],"jsValue":"base_"},{"name":"method","value":"'keep_selected'","usedVars":[],"jsValue":"'keep_selected'"}],"selectGeom":false}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"hasError":false,"hasExecuted":true,"input":{"name":"input","type":0,"edges":[{"source":"~flowchart~nodes~0~output~edges~0~target~parentNode~output","target":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~0~source~parentNode~input","selected":false}],"meta":{"mode":0,"opts":{}},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~0~source~parentNode"},"output":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~0~source","model":9}},"target":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target","selected":false},"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"],"meta":{"mode":0,"opts":{}},"parentNode":{"name":"End","id":"node_h36h6ob16el","position":{"x":5500,"y":5580},"enabled":true,"type":"end","procedure":[{"type":13,"ID":"","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false},{"type":11,"ID":"Return","meta":{"name":"","module":""},"argCount":2,"args":[{"name":"__model__","value":"","jsValue":""},{"name":"value","value":"","jsValue":"","usedVars":[]}],"print":false,"enabled":true,"selectGeom":false}],"localFunc":[{"type":13,"ID":"local_func_blank","meta":{"name":"","module":""},"argCount":0,"args":[],"print":false,"enabled":true,"selectGeom":false}],"state":{"procedure":[],"show_code":true,"show_func":true},"input":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target","output":{"name":"output","type":1,"edges":[],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"},"hasError":false,"hasExecuted":true,"model":10}},"selected":false}],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"},"model":8}},"selected":false}],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"},"model":7}},"selected":false}],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"},"hasError":false,"hasExecuted":true,"model":6}},"selected":false}],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"},"model":5}},"selected":false}],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode"},"hasError":false,"hasExecuted":true,"model":4}},"selected":false},"~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~0~source~parentNode~input~edges~0"],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0~output~edges~0~target~parentNode"},"model":3}},"selected":false}],"meta":{"mode":0},"parentNode":"~flowchart~nodes~0"},"hasError":false,"hasExecuted":true,"model":2},"~flowchart~nodes~0~output~edges~0~target~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~0~source~parentNode","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"],"edges":["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0","~flowchart~nodes~0~output~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~0~source~parentNode~input~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0","~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"],"functions":[],"ordered":true,"last_updated":"2020-12-30T11:10:21.419Z"},"version":"0.7.1","settings":"{\"normals\":{\"show\":false,\"size\":5},\"axes\":{\"show\":true,\"size\":50},\"grid\":{\"show\":true,\"size\":500,\"pos_x\":0,\"pos_y\":0,\"pos_z\":0,\"pos\":{\"x\":0,\"y\":0,\"z\":0}},\"background\":{\"show\":true,\"background_set\":0},\"positions\":{\"show\":false,\"size\":7},\"tjs_summary\":{\"show\":false},\"gi_summary\":{\"show\":false},\"wireframe\":{\"show\":false},\"camera\":{\"pos\":{\"x\":-79.99999999999991,\"y\":-79.99999999999994,\"z\":79.99999999999991},\"target\":{\"x\":0,\"y\":0,\"z\":0},\"ortho\":false},\"colors\":{\"viewer_bg\":\"#E6E6E6\",\"position\":\"#000000\",\"position_s\":\"#0033FF\",\"vertex_s\":\"#FFCC00\",\"face_f\":\"#ffffff\",\"face_f_s\":\"#4949BD\",\"face_b\":\"#DDDDDD\",\"face_b_s\":\"#00006D\"},\"ambient_light\":{\"show\":true,\"color\":\"#FFFFFF\",\"intensity\":0.5},\"hemisphere_light\":{\"show\":true,\"helper\":false,\"skyColor\":\"#FFFFFF\",\"groundColor\":\"#FFFFFF\",\"intensity\":0.5},\"directional_light\":{\"show\":false,\"helper\":false,\"color\":\"#FFFFFF\",\"intensity\":1,\"shadow\":true,\"azimuth\":90,\"altitude\":45,\"distance\":10,\"type\":\"directional\",\"shadowSize\":3072},\"ground\":{\"show\":false,\"width\":1000,\"length\":1000,\"height\":-0.5,\"color\":\"#FFFFFF\",\"shininess\":0},\"select\":{\"selector\":{\"id\":7,\"name\":\"Polygons\"},\"tab\":\"6\",\"enabledselector\":{\"ps\":true,\"_v\":true,\"_e\":true,\"_w\":true,\"_f\":true,\"pt\":true,\"pl\":true,\"pg\":true,\"co\":true}},\"version\":\"0.4.38\",\"cesium\":{\"imagery\":{\"layer\":\"Open Street Map\",\"terrain\":\"Ellipsoid\",\"apiKey\":{\"here\":\"7vMRjLNCpcOAUQXU61eUp6EFbWCy7WLNmy9qLHO-1Bw\"}},\"camera\":{\"pos\":{\"x\":0,\"y\":0,\"z\":0},\"direction\":{\"x\":0,\"y\":0,\"z\":0},\"up\":{\"x\":0,\"y\":0,\"z\":0},\"right\":{\"x\":0,\"y\":0,\"z\":0}},\"updated\":true,\"time\":{\"date\":\"2020-05-11\"},\"model\":{\"polygonEdge\":true}}}"}